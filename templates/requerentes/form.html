{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">{{ 'Editar' if requerente else 'Novo' }} Requerente</h2>
  <form method="post"
        action="{% if requerente and requerente.id %}{{ url_for('requerente.edit', id=requerente.id) }}{% else %}{{ url_for('requerente.criar') }}{% endif %}"
        novalidate>
    <!-- {% if requerente %}
      <input type="hidden" name="id" value="{{ requerente.id }}">
    {% endif %} -->
    <div class="row gx-3">
      <div class="col-md-6 mb-3">
        <label for="nome" class="form-label">Nome <span class="text-danger">*</span></label>
        <input
          id="nome"
          name="nome"
          type="text"
          class="form-control"
          required
          autocomplete="off"
          value="{{ requerente.nome if requerente else '' }}"
        >
        <div id="nome-erro" class="invalid-feedback">
          <!-- mensagem de erro -->
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label for="telefone" class="form-label">Telefone</label>
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-phone"></i></span>
          <input
            id="telefone"
            name="telefone"
            type="tel"
            class="form-control"
            maxlength="15"
            autocomplete="off"
            value="{{ requerente.telefone if requerente else '' }}"
          >
        </div>
      </div>
    </div>
    <div class="mb-3">
      <label for="observacao-requerente" class="form-label">Observação</label>
      <textarea
        id="observacao-requerente"
        name="observacao"
        class="form-control"
        rows="3"
        autocomplete="off"
      >{{ requerente.observacao if requerente else '' }}</textarea>
    </div>
    <button type="submit" class="btn btn-primary">
      <i class="fas fa-save me-1"></i>
      {{ 'Salvar' if requerente else 'Cadastrar' }}
    </button>
    <a href="{{ url_for('requerente.index') }}" class="btn btn-secondary ms-2">
      <i class="fas fa-arrow-left me-1"></i>Voltar
    </a>
  </form>
</div>

<script>
  // Exemplo de validação Bootstrap customizada
  (function () {
    'use strict'
    var form = document.querySelector('form')
    form.addEventListener('submit', function (event) {
      if (!form.checkValidity()) {
        event.preventDefault()
        event.stopPropagation()
      }
      form.classList.add('was-validated')
    }, false)
  })()
</script>
{% endblock %}
